<section class="text-gray-600 body-font">
  <div class="px-5 mt-10 mx-auto flex flex-col">
    <div class="flex flex-col">
      <div class="sm:py-8 sm:px-4">
        <div class="text-center">
          <div
            class="w-20 h-20 rounded-full inline-flex items-center justify-center bg-gray-200 text-gray-400"
          >
            <svg
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              class="w-10 h-10"
              viewBox="0 0 24 24"
            >
              <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </div>
        </div>
        <form
          class="w-full my-10 p-4 bg-slate-50 border-l-8 border-l-main-200/30 rounded"
          [formGroup]="editProfileForm"
          (ngSubmit)="onSubmit()"
        >
          <!-- Título y control de edición -->
          <div class="flex justify-between items-center g">
            <p class="text-xl mb-8 font-semibold">Mi perfil</p>
            <button
              class="flex items-center gap-2 bg-blue-100 px-4 py-2 rounded text-main"
              type="button"
              (click)="toggleEdit()"
            >
              <div class="pi pi-user-edit text-3xl"></div>
              {{ editProfileForm.enabled ? "Cancelar" : "Editar" }}
            </button>
          </div>
          <!-- [formGroup]="registerForm" (ngSubmit)="onSubmit()" -->
          <div class="relative mb-4">
            <label for="firstName" class="leading-7 text-sm text-gray-600"
              >Nombre(s)</label
            >
            <input
              type="text"
              id="firstName"
              name="firstName"
              class="w-full bg-white rounded border border-gray-300 focus:border-blue-100 focus:ring-2 focus:ring-main-100 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"
              formControlName="firstName"
            />
          </div>

          <div class="relative mb-4">
            <label for="lastName" class="leading-7 text-sm text-gray-600"
              >Apellido(s)</label
            >
            <input
              type="text"
              id="lastName"
              name="lastName"
              class="w-full bg-white rounded border border-gray-300 focus:border-blue-100 focus:ring-2 focus:ring-main-100 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"
              formControlName="lastName"
            />
          </div>

          <div class="relative mb-4">
            <label for="phone" class="leading-7 text-sm text-gray-600"
              >Teléfono</label
            >
            <input
              type="tel"
              id="phone"
              name="phone"
              class="w-full bg-white rounded border border-gray-300 focus:border-blue-100 focus:ring-2 focus:ring-main-100 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"
              formControlName="phone"
            />
          </div>

          <button
            type="submit"
            class="text-white bg-main border-0 py-2 px-8 w-full focus:outline-none hover:bg-blue-700 rounded text-lg"
            [ngClass]="{ 'bg-gray-500 hover:bg-gray-500': !editProfileForm.enabled || isLoading}"
            [disabled]="!editProfileForm.enabled || isLoading"
          >
            {{ isLoading ? "Guardando..." : "Guardar" }}
          </button>
        </form>
        <!-- Posts -->
        <section
          class="w-full my-10 p-4 bg-slate-50 border-l-8 border-l-main-200/30 rounded"
        >
          <p class="text-xl mb-8 font-semibold">Mis publicaciones</p>
          <div
            *ngIf="posts.length > 0; else noPosts"
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2"
          >
            <app-shop-post-feed
              *ngFor="let post of posts"
              [post]="post"
              [routerLink]="['/shop/edit-post', post.postId]"
            ></app-shop-post-feed>
          </div>
          <ng-template #noPosts>
            <div class="flex flex-col items-center gap-4 mt-10 text-gray-400">
              <div class="pi pi-file-o text-8xl"></div>
              <p class="text-center w-full">
                No hay publicaciones de productos
              </p>
            </div>
          </ng-template>
        </section>

        <!-- Borradores -->
        <section
          class="w-full my-10 p-4 border-l-8 border-l-main-200/30 rounded"
        >
          <p class="text-xl mb-8 font-semibold">Mis borradores</p>
          <div
            *ngIf="posts.length > 0; else noPosts"
            class="grid grid-cols-3 gap-2"
          >
            <app-shop-post-feed
              *ngFor="let draft of drafts"
              [post]="draft"
              [routerLink]="['/shop/edit-post', draft.postId]"
            ></app-shop-post-feed>
          </div>
          <ng-template #noPosts>
            <div class="gap-4 mt-10 text-gray-400">
              <div class="pi pi-file-o text-8xl"></div>
              <p class="">No hay borradores de productos</p>
            </div>
          </ng-template>
        </section>
      </div>
    </div>
  </div>
</section>
